<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>FrameDrop — AutoFit v5 (Pages Ready)</title>
  <style>
    :root{--bg:#0b0d10;--fg:#e7ebf0;--muted:#a2adba;--line:#1f2630;--ok:#7ee787;--bad:#ff9b9b;--brand:#7aa2ff;--brand2:#8bd1ff}
    *{box-sizing:border-box}
    html,body{height:100%}
    body{margin:0;background:#0b0d10;color:var(--fg);font:14px/1.45 Inter,ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Arial}
    .wrap{display:grid;grid-template-columns:380px 1fr;gap:14px;height:100%;padding:14px}
    .panel{background:#12161b;border:1px solid var(--line);border-radius:16px;box-shadow:0 10px 30px rgba(0,0,0,.25);overflow:auto;-webkit-overflow-scrolling:touch;min-height:0}
    .left{display:flex;flex-direction:column;gap:10px}
    .section{padding:14px;border-top:1px solid var(--line)}
    .section:first-child{border-top:none}
    h1{font-size:18px;margin:8px 0 2px}
    h2{font-size:14px;margin:0 0 10px;color:#cbd6e5;letter-spacing:.25px}
    .hint{color:var(--muted);font-size:12px}
    .kv{display:grid;grid-template-columns:140px 1fr;gap:8px;align-items:center;margin:6px 0}
    input[type="text"],select{width:100%;color:#e7ebf0;background:#0f1318;border:1px solid #28303b;border-radius:10px;padding:9px}
    .btn{appearance:none;border:none;background:linear-gradient(90deg,var(--brand),var(--brand2));color:#0b0d10;padding:10px 12px;border-radius:12px;font-weight:750;cursor:pointer}
    .btn.gray{background:#2c3440;color:#e7ebf0}
    .btn:disabled{opacity:.55;cursor:not-allowed;filter:grayscale(.2)}
    .btn.row{width:100%}
    .canvasWrap{position:relative;height:100%;display:flex;align-items:center;justify-content:center;background:#161b22;border-radius:16px}
    canvas{max-width:100%;max-height:100%;background:#0b0d10}
    .chips{display:flex;gap:8px;flex-wrap:wrap;margin-top:8px}
    .chip{display:inline-flex;gap:6px;align-items:center;padding:4px 10px;border-radius:999px;border:1px solid var(--line);background:#0f141a;color:#cbd6e5;font-size:12px}
    .ok{border-color:#1f3b27;background:#0f1712;color:#7ee787}
    .bad{border-color:#3b2727;background:#17100f;color:#ffb0b0}
    .sticky{position:sticky;bottom:0;padding:10px 14px;border-top:1px solid var(--line);background:linear-gradient(180deg,rgba(18,22,27,.7),rgba(18,22,27,.95));backdrop-filter:blur(4px)}
    .mono{font-family:ui-monospace,SFMono-Regular,Menlo,monospace}
    .diag{margin-top:8px;padding:8px;border-radius:10px;background:#0f141a;border:1px dashed #2b3645;font-size:12px;color:#cbd6e5}
  </style>
</head>
<body>
<div class="wrap">
  <div class="left panel">
    <div class="section">
      <h1>FrameDrop — AutoFit v5 (Pages Ready)</h1>
      <div class="hint">Order: Base → Overlay → Art. “JS READY” below confirms the script is active.</div>
      <div id="diag" class="diag">Diagnostics: loading…</div>
      <div class="chips">
        <div id="chipReady" class="chip">JS: —</div>
      </div>
      <div style="margin-top:6px">
        <button id="initBtn" class="btn gray">Run setup (if needed)</button>
      </div>
    </div>

    <div class="section">
      <h2>1) Load Mockup</h2>
      <div class="kv"><span>Base PNG</span><input id="baseInput" type="file" accept="image/png,image/webp,image/jpeg"/></div>
      <div class="kv"><span>Overlay PNG</span><input id="overlayInput" type="file" accept="image/png"/></div>
      <div class="chips">
        <div id="chipBase" class="chip">Base: —</div>
        <div id="chipOverlay" class="chip">Overlay: —</div>
        <div id="chipOpening" class="chip">Opening: —</div>
        <div id="chipArt" class="chip">Art: 0</div>
      </div>
    </div>

    <div class="section">
      <h2>2) Options</h2>
      <div class="kv"><span>Fit</span>
        <select id="fitMode">
          <option value="cover" selected>Cover (fill edge‑to‑edge)</option>
          <option value="contain">Contain (show all)</option>
        </select>
      </div>
      <div class="kv"><span>Padding %</span><input id="padRange" type="range" min="0" max="10" step="0.5" value="2"/></div>
      <div class="kv"><span>Output name</span><input id="namePattern" value="{art}__in__{mockup}.png"/></div>
    </div>

    <div class="section">
      <h2>3) Art Files</h2>
      <input id="artInput" type="file" accept="image/png,image/jpeg,image/webp" multiple/>
    </div>

    <div class="sticky">
      <div class="kv">
        <button id="renderOneBtn" class="btn row" disabled>Render preview</button>
      </div>
      <div class="kv">
        <button id="renderAllBtn" class="btn row" disabled>Render & export all</button>
      </div>
    </div>
  </div>

  <div class="panel canvasWrap">
    <canvas id="cvs"></canvas>
  </div>
</div>
<script src="app-v5.js" defer></script>
</body>
</html>
